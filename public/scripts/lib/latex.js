'use strict';

angular.module('Doi2BibApp').service('Latex', function() {
  var charMap = {
    "à": "\\`a",
    "è": "\\`e",
    "ì": "\\`{\\i}",
    "ò": "\\`o",
    "ù": "\\`u",
    "ỳ": "\\`y",
    "À": "\\`A",
    "È": "\\`E",
    "Ì": "\\`{\\I}",
    "Ò": "\\`O",
    "Ù": "\\`U",
    "Ỳ": "\\`Y",
    "á": "\\'a",
    "ć": "\\'c",
    "é": "\\'e",
    "í": "\\'{\\i}",
    "ó": "\\'o",
    "ú": "\\'u",
    "ý": "\\'y",
    "Á": "\\'A",
    "É": "\\'E",
    "Í": "\\'{\\I}",
    "Ó": "\\'O",
    "Ú": "\\'U",
    "Ý": "\\'Y",
    "â": "\\^a",
    "ê": "\\^e",
    "î": "\\^{\\i}",
    "ô": "\\^o",
    "û": "\\^u",
    "ŷ": "\\^y",
    "Â": "\\^A",
    "Ê": "\\^E",
    "Î": "\\^{\\I}",
    "Ô": "\\^O",
    "Û": "\\^U",
    "Ŷ": "\\^Y",
    "ä": "\\\"a",
    "ë": "\\\"e",
    "ï": "\\\"{\\i}",
    "ö": "\\\"o",
    "ü": "\\\"u",
    "ÿ": "\\\"y",
    "Ä": "\\\"A",
    "Ë": "\\\"E",
    "Ï": "\\\"{\\I}",
    "Ö": "\\\"O",
    "Ü": "\\\"U",
    "Ÿ": "\\\"Y",
    "ã": "\\~{a}",
    "ñ": "\\~{n}",
    "ă": "\\u{a}",
    "ĕ": "\\u{e}",
    "ŏ": "\\u{o}",
    "š": "\\v{s}",
    "č": "\\v{c}",
    "ç": "\\c{c}",
    "Ç": "\\c{C}",
    "œ": "{\\oe}",
    "Œ": "{\\OE}",
    "æ": "{\\ae}",
    "Æ": "{\\AE}",
    "å": "{\\aa}",
    "Å": "{\\AA}",
    "–": "--",
    "—": "---",
    "−": "--",
    "ø": "{\\o}",
    "Ø": "{\\O}",
    "ß": "{\\ss}",
    "¡": "{!`}",
    "¿": "{?`}",
    "\\": "\\\\",
    "~": "\\~",
    "&": "\\&",
    "$": "\\$",
    //"{": "\\{",
    //"}": "\\}",
    "%": "\\%",
    "#": "\\#",
    "_": "\\_",
    "≥": "$\\ge$",
    "≤": "$\\le$",
    "≠": "$\\neq$",
    "©": "\copyright",
    "ı": "{\\i}",
    "α": "$\\alpha$",
    "β": "$\\beta$",
    "γ": "$\\gamma$",
    "δ": "$\\delta$",
    "ε": "$\\epsilon$",
    "η": "$\\eta$",
    "θ": "$\\theta$",
    "λ": "$\\lambda$",
    "µ": "$\\mu$",
    "ν": "$\\nu$",
    "π": "$\\pi$",
    "σ": "$\\sigma$",
    "τ": "$\\tau$",
    "φ": "$\\phi$",
    "χ": "$\\chi$",
    "ψ": "$\\psi$",
    "ω": "$\\omega$",
    "°": "$\\deg$",
    "‘": "`",
    "’": "'",
    "′": "$^\\prime$",
    "“": "``",
    "”": "''",
    "‚": ",",
    "„": ",,",
    "\xa0": " "
  };

  this.encode = function(str) {
    return str.replace(/./g, function(c) {
      if (charMap[c]) {
        return charMap[c];
      } else {
        return c;
      }
    });
  };

  this.removeNA = function(str) {
    return str.replace(', pages={n/a–n/a', '');
  };
});
